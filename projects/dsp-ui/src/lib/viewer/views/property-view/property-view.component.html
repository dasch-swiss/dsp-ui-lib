<!-- properties -->
<div class="properties-container">
    <div class="properties">

        <!-- list of properties -->
        <div *ngFor="let prop of propArray; let last = last" [class.border-bottom]="!last">
            <!-- show property; all in case of showAll === true or only the ones with prop.values -->
            <div class="property" *ngIf="!prop.propDef['isLinkProperty'] && showAllProps || ( prop.values && prop.values.length > 0 )">
                <div class="property-label"
                    (mouseenter)="mouseEnterActionBubble(prop)"
                    (mouseleave)="mouseLeaveActionBubble()">
                    <!-- label of the property -->
                    <h3 class="label mat-subheading-1"
                        [class.label-info]="prop.propDef.comment"
                        [matTooltip]="prop.propDef.comment"
                        matTooltipPosition="above">
                        {{prop.propDef.label}}
                    </h3>
                    <div class="action-bubble" *ngIf="showActionBubble && hoveredProp == prop.propDef.id" [@simpleFadeAnimation]="'in'">
                        <div class="button-container">
                            <button class="info">
                                <mat-icon>info</mat-icon>
                            </button>
                            <button class="info">
                                <mat-icon>comment</mat-icon>
                            </button>
                            <button class="info">
                                <mat-icon>delete</mat-icon>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="property-value">
                    <!-- the value(s) of the property -->
                    <div *ngFor="let val of prop.values">
                        <dsp-display-edit *ngIf="val"
                            #displayEdit
                            [parentResource]="parentResource"
                            [displayValue]="val">
                        </dsp-display-edit>
                    </div>
                    <!-- Add value form -->
                    <div *ngIf="addValueFormIsVisible && propID === prop.propDef.id">
                        <dsp-add-value
                            #addValue
                            class="add-value"
                            [parentResource]="parentResource"
                            [resourcePropertyDefinition]="$any(parentResource.entityInfo.properties[prop.propDef.id])"
                            (operationCancelled)="hideAddValueForm()">
                        </dsp-add-value>
                    </div>
                    <!-- Add button -->
                    <!-- temporary hack to hide add button for an XML value -->
                    <div *ngIf="prop.guiDef.propertyIndex !== 'http://0.0.0.0:3333/ontology/0001/anything/v2#hasRichtext' &&
                        addButtonIsVisible &&
                        prop.guiDef.cardinality !== 1 &&
                        propID !== prop.propDef.id">
                        <button class="create" (click)="showAddValueForm(prop)" title="Add a new value">
                            <mat-icon>add_box</mat-icon>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
