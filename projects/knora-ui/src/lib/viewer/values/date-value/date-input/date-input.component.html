<div [formGroup]="form" class="date-input-container">
  <mat-form-field class="start child-input-component">
    <span class="calendar">{{startDateControl.value?.calendarName}}</span>
    <kui-jdn-datepicker [activeCalendar]="startDateControl.value?.calendarName">
      <input matInput [matDatepicker]="picker1" [formControlName]="'dateStart'" (dateChange)="_handleInput()" [errorStateMatcher]="matcher" readonly>
      <mat-error *ngIf="startDateControl.hasError('required')">
        Start date is <strong>required</strong>
      </mat-error>
      <mat-error *ngIf="startDateControl.hasError('sameCalendarRequired')">
        In a period, start and end date must use the same <strong>calendar</strong>
      </mat-error>
      <mat-error *ngIf="startDateControl.hasError('periodStartEnd')">
        In a period, start must be <strong>before end</strong>
      </mat-error>
      <mat-datepicker-toggle *ngIf="!readonly" matSuffix [for]="picker1"></mat-datepicker-toggle>
      <mat-datepicker #picker1 [calendarHeaderComponent]="calendarHeaderComponent"></mat-datepicker>
    </kui-jdn-datepicker>
  </mat-form-field>
  <mat-checkbox *ngIf="!readonly" [formControlName]="'isPeriod'" (change)="_handleInput()"></mat-checkbox>
  <mat-form-field *ngIf="isPeriodControl.value" class="end child-input-component">
    <span class="calendar">{{endDateControl.value?.calendarName}}</span>
    <kui-jdn-datepicker [activeCalendar]="endDateControl.value?.calendarName">
      <input matInput [matDatepicker]="picker2" [formControlName]="'dateEnd'" (dateChange)="_handleInput()" readonly>
      <mat-datepicker-toggle *ngIf="!readonly" matSuffix [for]="picker2"></mat-datepicker-toggle>
      <mat-datepicker #picker2 [calendarHeaderComponent]="calendarHeaderComponent"></mat-datepicker>
    </kui-jdn-datepicker>
  </mat-form-field>
</div>
